--- libtool-1.3.5/ltmain.in.mktemp	2004-01-25 07:50:41.000000000 +0100
+++ libtool-1.3.5/ltmain.in	2004-01-29 17:17:40.646365168 +0100
@@ -5672,7 +5672,13 @@
 	    if test "$finalize" = yes && test -z "$run"; then
 	      tmpdir="/tmp"
 	      test -n "$TMPDIR" && tmpdir="$TMPDIR"
-	      tmpdir="$tmpdir/libtool-$$"
+	      tmpdir_mktemp=`mktemp -d $tmpdir/libtool-XXXXXX 2> /dev/null`
+	      if test $? = 0 ; then
+		tmpdir="$tmpdir_mktemp"
+		unset tmpdir_mktemp
+	      else
+		tmpdir="$tmpdir/libtool-$$"
+	      fi
 	      if $mkdir "$tmpdir" && chmod 700 "$tmpdir"; then :
 	      else
 		$echo "$modename: error: cannot create temporary directory \`$tmpdir'" 1>&2
